[{"link_serial":101,"update_time":"2017-10-10T02:23:56.445000+00:00","phase_snode_id":null,"scrub_version":"48f99abcdf450e7c49a04015355fb699f785e8cbf8288d894686a64c6caeddd1","update_user_id":"dmaganti@snaplogic.com","class_fqid":"com-snaplogic-pipeline_8","partition_snode_id":"59dc2ba5a920664b970d3b33","path_id":"/PwC/Dheeraj/TestProj","class_version":8,"snode_id":"59dc2f3c44ecb44c6ad9927b","snap_map":{"f32c2ae6-33e3-487c-ad12-392ea0600694":{"instance_id":"f32c2ae6-33e3-487c-ad12-392ea0600694","class_id":"com-snaplogic-snaps-rest-post","class_build_tag":"snapsmrc414","class_fqid":"com-snaplogic-snaps-rest-post_1-snapsmrc414","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"REST Post"}},"view_serial":100,"account":{"account_ref":{"expression":false,"value":{}}},"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"settings":{"retryInterval":{"value":3},"trustAllCerts":{"value":true},"retry":{"value":5},"timeout":{"value":900},"uploadFile":{"expression":false,"value":null},"showAllHeaders":{"value":false},"batchSize":{"value":null},"executable_during_suggest":{"value":true},"entity":{"expression":true,"value":"$"},"header":{"value":[{"headerKey":{"expression":true,"value":"'Content-Type'"},"headerValue":{"expression":true,"value":"'application/json'"}}]},"responseEntityType":{"value":"DEFAULT"},"uploadTransferRequestType":{"value":"Chunked transfer encoding"},"followRedirects":{"value":true},"serviceUrl":{"expression":false,"value":"http://elastic.thedatapiper.com:9200/us_east_assurance_grace/xlos_808225ca-ce36-e711-ad2c-e4b318f3e7f0_aggr_journal/_search"},"uploadFileKey":{"expression":false,"value":"file"},"connTimeout":{"value":30},"queryParams":{"value":[{"queryParamValue":{"expression":true,"value":"'aggregations'"},"queryParam":{"value":"filter_path"}}]},"rawData":{"value":false}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"continue"}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}}},"class_version":1,"instance_fqid":"f32c2ae6-33e3-487c-ad12-392ea0600694_1"},"eb561679-0c2b-4ef5-9cbc-7e9280823e2c":{"instance_id":"eb561679-0c2b-4ef5-9cbc-7e9280823e2c","class_id":"com-snaplogic-snaps-transform-jsongenerator","class_build_tag":"snapsmrc414","class_fqid":"com-snaplogic-snaps-transform-jsongenerator_2-snapsmrc414","instance_version":1,"property_map":{"info":{"notes":{"value":null},"label":{"value":"Generate Query"}},"view_serial":100,"settings":{"editable_content":{"value":"## Enter your JSON-encoded data in this space.  Note that this text is\n## treated as an Apache Velocity template, so you can substitute values\n## from input documents or the pipeline parameters.  See the following\n## URL for more information about Velocity:\n##   https://velocity.apache.org/engine/devel/user-guide.html\n\n{\n  \"_source\": {\n    \"includes\": [\"gl_business_unit_code\",\n    \"gl_journal_id\",\n    \"gl_account_number\",\n    \"ca_account_name\",\n    \"gl_local_amount_currency\",\n    \"jl_local_dbt\",\n    \"jl_local_cdt\",\n    \"gl_reporting_amount_currency\",\n    \"jl_rep_dbt\",\n    \"jl_rep_cdt\",\n    \"gl_effective_date\",\n    \"gl_source\"]\n  },\n  \"query\": {\n    \"simple_query_string\" : {\n            \"query\" : \"(MSBUSER|RPETERS)\",\n            \"fields\": [\"gl_user_id.keyword\", \"gl_approver_id.keyword\"]\n        }\n  },\n  \"aggregations\": {\n    \"companyCode\": {\n      \"terms\": {\n        \"field\": \"gl_business_unit_code.keyword\"\n      },\n      \"aggregations\": {\n        \"journalId\": {\n          \"terms\": {\n            \"field\": \"gl_journal_id.keyword\"\n          },\n          \"aggregations\": {\n            \"effectiveDate\": {\n              \"terms\": {\n                \"field\": \"gl_effective_date\"\n              },\n              \"aggregations\": {\n                \"localDebitAmount\": {\n                  \"sum\": {\n                    \"field\": \"jl_local_dbt\"\n                  }\n                },\n                \"localCreditAmount\": {\n                  \"sum\": {\n                    \"field\": \"jl_local_cdt\"\n                  }\n                },\n                \"reportingDebitAmount\": {\n                  \"sum\": {\n                    \"field\": \"jl_rep_dbt\"\n                  }\n                },\n                \"reportingCreditAmount\": {\n                  \"sum\": {\n                    \"field\": \"jl_rep_cdt\"\n                  }\n                },\n                \"accountCodes\":{\n                  \"terms\": {\n                              \"field\": \"gl_account_number\"\n                          },\n                          \"aggregations\":{\n                            \n                            \"accountName\":{\n                              \"terms\": {\n                                  \"field\": \"ca_account_name.keyword\"\n                                }  \n                            },\n                            \"localCurr\":{\n                              \"terms\": {\n                                  \"field\": \"gl_local_amount_currency.keyword\"\n                                }  \n                            },\n                            \"localAmtDb\":{\n                              \"sum\": {\n                                  \"field\": \"jl_local_dbt\"\n                                }  \n                            },\n                            \"localAmtCr\":{\n                              \"sum\": {\n                                  \"field\": \"jl_local_cdt\"\n                                }  \n                            },\n                            \"commonRateCurr\":{\n                              \"terms\": {\n                                  \"field\": \"gl_reporting_amount_currency.keyword\"\n                                }  \n                            },\n                            \"commonRateAmtDb\":{\n                              \"sum\": {\n                                  \"field\": \"jl_rep_dbt\"\n                                }  \n                            },\n                            \"commonRateAmtCr\":{\n                              \"sum\": {\n                                  \"field\": \"jl_rep_cdt\"\n                              }\n                            }\n                          }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\n## Tips:\n##  * The sample data above will generate a single empty document, uncomment\n##    the line in the middle to include the sample fields.  Adding more\n##    objects to the root array will cause the snap to generate more\n##    than one document.\n##  * Pipeline parameters can be referenced by prefixing the parameter\n##    name with an underscore, like so:\n##      ${_pipelineParamName}\n##  * If you add an input view to the snap, this template will be\n##    evaluated for each input document.\n##  * Fields in the input documents can be referenced by prefixing them\n##    with a dollar-sign ($), like so:\n##      $parent.child[0].value\n##  * Any referenced document values and pipeline parameters will\n##    automatically be JSON-encoded when they are inserted into the final\n##    JSON document.  You should not have to worry about escaping values\n##    yourself.\n##  * If you are having troubles getting a template to produce valid JSON,\n##    you can add an error view to the snap to get a document that\n##    contains the output of the template evaluation."},"arrayElementsAsDocuments":{"value":true}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}}},"class_version":2,"instance_fqid":"eb561679-0c2b-4ef5-9cbc-7e9280823e2c_1"}},"org_snode_id":"532a91f8640a9a5ec07a3f11","path":"/PwC/Dheeraj/TestProj/ES_SampleQuery","instance_version":1,"migrate_version":"mrc308","scrub_backup":[],"create_user_id":"dmaganti@snaplogic.com","project_snode_id":"59dc2f1f59ee1329743b9d5b","property_map":{"info":{"notes":{"value":null},"label":{"value":"ES_SampleQuery"},"purpose":{"value":null},"pipeline_doc_uri":{"value":null},"author":{"value":"dmaganti@snaplogic.com"}},"input":{},"error":{"error_behavior":{"value":"none"},"f32c2ae6-33e3-487c-ad12-392ea0600694_error0":{"label":{"value":"REST Post - error0"},"view_type":{"value":"document"}}},"output":{"f32c2ae6-33e3-487c-ad12-392ea0600694_output0":{"label":{"value":"REST Post - output0"},"view_type":{"value":"document"}}},"settings":{"param_table":{"value":[]},"imports":{"value":[]}}},"render_map":{"pan_x_num":0,"default_snaplex":"58aef62549eb066990421935","scale_ratio":1,"detail_map":{"f32c2ae6-33e3-487c-ad12-392ea0600694":{"grid_x_int":5,"output":{},"grid_y_int":2,"rot_tail_int":0,"error":{"error0":{"dx_int":0,"rot_int":0,"dy_int":-1}},"input":{},"rot_int":0},"eb561679-0c2b-4ef5-9cbc-7e9280823e2c":{"grid_x_int":4,"error":{},"grid_y_int":2,"rot_tail_int":0,"input":{},"output":{},"rot_int":0}},"pan_y_num":0},"org_id":"532a91f8640a9a5ec07a3f11","instance_id":"5addac5a-d073-4127-be44-4c04d2868b01","class_id":"com-snaplogic-pipeline","create_time":"2017-10-10T02:23:56.402000+00:00","instance_fqid":"5addac5a-d073-4127-be44-4c04d2868b01_1","link_map":{"link100":{"src_view_id":"output0","dst_view_id":"input0","src_id":"eb561679-0c2b-4ef5-9cbc-7e9280823e2c","dst_id":"f32c2ae6-33e3-487c-ad12-392ea0600694"}}}]